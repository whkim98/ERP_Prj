<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lab.erp.repository.c3.C3Repository">
	<!-- 매장매출 -->
	<select id="findAll_storesales" resultType="com.lab.erp.vo.c.c3.Erp_StoresalesVO">
	 	SELECT * FROM erp_storesales ORDER BY storesales_no DESC
	</select>
	
	<insert id="save_storesales" flushCache="true" parameterType="com.lab.erp.vo.c.c3.Erp_StoresalesVO" keyProperty="warehouse_no" useGeneratedKeys="true" keyColumn="storesales_no">
		INSERT INTO erp_storsales (ctgr_no, storesales_code, company_no, storesales_date, customer_no, settletype_no, comcode_no) 
		VALUES (#{ctgr_no}, #{storesales_code}, #{company_no}, #{storesales_date}, #{customer_no}, #{settletype_no}, #{comcode_no})
	</insert>
	
	<update id="update_storesales" flushCache="true" parameterType="com.lab.erp.vo.c.c3.Erp_StoresalesVO">
		UPDATE erp_warehouse SET ctgr_no = #{ctgr_no}, storesales_code = #{storesales_code}, company_no = #{company_no}, storesales_date = #{storesales_date}, customer_no = #{customer_no}, settletype_no = #{settletype_no}, comcode_no = #{comcode_no}
		WHERE storsales_no = #{storesales_no}
	</update>
	
	<delete id="delete_storesales" flushCache="true" parameterType="com.lab.erp.vo.c.c3.Erp_StoresalesVO">
		DELETE FROM erp_storesales WHERE storesales_no = #{storesales_no}
	</delete>
	
	
	<!-- 창고관리 -->
	<select id="findAll_warehouse" resultType="com.lab.erp.vo.c.c3.Erp_WarehouseVO">
	 	SELECT * FROM erp_warehouse ORDER BY warehouse_no DESC
	</select>
	
	<insert id="save_warehouse" flushCache="true" parameterType="com.lab.erp.vo.c.c3.Erp_WarehouseVO" keyProperty="warehouse_no" useGeneratedKeys="true" keyColumn="warehouse_no">
		INSERT INTO erp_warehouse (company_no, warehouse_date, goods_no, warehouse_qty, warehouse_release, comcode_no) 
		VALUES (#{company_no}, #{warehouse_date}, #{good_no}, #{warehouse_qty}, #{warehouse_release}, #{comcode_no})
	</insert>
	
	<update id="update_warehouse" flushCache="true" parameterType="com.lab.erp.vo.c.c3.Erp_WarehouseVO">
		UPDATE erp_warehouse SET company_no = #{company_no}, warehouse_date #{warehouse_date}, goods_no = #{goods_no}, warehouse_qty = #{warehouse_qty}, warehouse_release = #{warehouse_release}, comcode_no = #{comcode_no}
		WHERE warehouse_no = #{warehouse_no}
	</update>
	
	<delete id="delete_warehouse" flushCache="true" parameterType="com.lab.erp.vo.c.c3.Erp_WarehouseVO">
		DELETE FROM erp_warehouse WHERE warehouse_no = #{warehouse_no}
	</delete>
	

	<!-- 행사관리 -->
	<select id="findAll_event" resultType="com.lab.erp.vo.c.c3.Erp_EventVO">
	 	SELECT * FROM erp_event ORDER BY event_no DESC
	</select>
	
	<insert id="save_event" flushCache="true" parameterType="com.lab.erp.vo.c.c3.Erp_EventVO" keyProperty="event_no" useGeneratedKeys="true" keyColumn="event_no">
		INSERT INTO erp_event (event_code, event_name, event_start, event_end, event_period, goods_no, event_price, event_qty, event_tax, event_total, event_manager, event_remark, comcode_no) 
		VALUES (#{event_code}, #{event_name}, #{event_start}, #{event_end}, #{event_period}, #{goods_no}, #{event_price}, #{event_qty}, #{event_tax}, #{event_total}, #{event_manager}, #{event_remark}, #{comcode_no})
	</insert>
	
	<update id="update_event" flushCache="true" parameterType="com.lab.erp.vo.c.c3.Erp_EventVO">
		UPDATE erp_event SET event_code = #{event_code}, event_name = #{event_name}, event_start = #{event_start}, event_end = #{event_end}, event_period = #{event_period}, goods_no = #{goods_no}, event_price = #{event_price}, event_qty = #{event_qty}, event_tax = #{event_tax}, event_total = #{event_total}, event_manager = #{event_manager}, event_remark = #{event_remark}
		WHERE event_no = #{event_no}
	</update>
	
	<delete id="delete_event" flushCache="true" parameterType="com.lab.erp.vo.c.c3.Erp_EventVO">
		DELETE FROM erp_event WHERE event_no = #{event_no}
	</delete>
	
	
	<!-- 온라인매출 -->
	<select id="findAll_online" resultType="com.lab.erp.vo.c.c3.Erp_OnlineVO">
	 	SELECT * FROM erp_online ORDER BY online_no DESC
	</select>
	
	<insert id="save_online" flushCache="true" parameterType="com.lab.erp.vo.c.c3.Erp_OnlineVO" keyProperty="online_no" useGeneratedKeys="true" keyColumn="online_no">
		INSERT INTO erp_online (ctgr_no, online_code, team_no, online_date, customer_no, settletype_no, comcodee_no) 
		VALUES (#{ctgr_no}, #{online_code}, #{team_no}, #{online_date}, #{customer_no}, #{settletype_no}, #{comcode_no})
	</insert>
	
	<update id="update_online" flushCache="true" parameterType="com.lab.erp.vo.c.c3.Erp_OnlineVO">
		UPDATE erp_online SET ctgr_no = #{ctgr_no}, online_code = #{online_code}, team_no = #{team_no}, online_date=#{online_date}, customer_no=#{customer_no} goods_no=#{goods_no}, online_qty=#{online_qty}, online_price=#{online_price}, online_tax=#{online_tax}, online_total=#{online_total}, settletype_no=#{settletype_no}
		WHERE online_no = #{online_no}
	</update>
	
	<delete id="delete_online" flushCache="true" parameterType="com.lab.erp.vo.c.c3.Erp_OnlineVO">
		DELETE FROM erp_online WHERE online_no = #{online_no}
	</delete>
	
	
	<!-- 상품조회 -->
	<select id="findGoodsAll" resultType="com.lab.erp.vo.d.d6.Erp_GoodsVO">
		SELECT * FROM erp_goods
	</select>	
	
	<!-- 회사조회 -->
	<select id="findCompanyAll" resultType="com.lab.erp.vo.a.a1.Erp_CompanyVO">
		SELECT * FROM erp_company
	</select>
	
	<!-- 카테고리조회 -->
	<select id="findCtgrAll" resultType="com.lab.erp.vo.all.Erp_CtgrVO">
		SELECT * FROM erp_ctgr
	</select>	
	
	<!-- 부서-팀조회 -->
	<select id="findTeamAll" resultType="com.lab.erp.vo.login.Erp_TeamVO">
		SELECT * FROM erp_team
	</select>	
	
	<!-- 고객정보조회 -->
	<select id="findCustomerAll" resultType="com.lab.erp.vo.c.c4.Erp_CustomerVO">
		SELECT * FROM erp_customer
	</select>	
	
	<!-- 결제구분조회 -->
	<select id="findSettletypeAll" resultType="com.lab.erp.vo.b.b3.Erp_SettletypeVO">
		SELECT * FROM erp_settletype
	</select>	
	
		
	<!-- 멀티상품조회 -->
	<select id="findGoodslotAll" resultType="com.lab.erp.vo.d.d6.Erp_GoodslotVO">
		SELECT * FROM erp_goodslot 
	</select>	
	
	<update id="update_goodslot_plus" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_Bs1VO">
		UPDATE erp_goodslot SET  goodslot_qty = #{goodslot_qty} + goodslot_qty
		WHERE goodslot_no = #{goodslot_no}
	</update>
	
	<update id="update_goodslot_minus" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_Bs1VO">
		UPDATE erp_goodslot SET  goodslot_qty = #{goodslot_qty} - goodslot_qty
		WHERE goodslot_no = #{goodslot_no}
	</update>
	
	
	<select id="findSalesgoodsAll" resultType="com.lab.erp.vo.c.Erp_SalesgoodsVO">
		SELECT * FROM erp_salesgoods where salesgoods_code = #{salesgoods_code}
	</select>	

	<insert id="save_salesgoods" flushCache="true" parameterType="com.lab.erp.vo.c.Erp_SalesgoodsVO" keyProperty="salesgoods_no" useGeneratedKeys="true" keyColumn="salesgoods_no">
		INSERT INTO erp_salesgoods (salesgoods_code, goodslot_no, salesgoods_qty, salesgoods_price, salesgoods_tax, salesgoods_total) 
		VALUES (#{salesgoods_code}, #{goodslot_no}, #{salesgoods_qty}, #{salesgoods_price}, #{salesgoods_tax}, #{salesgoods_total})
	</insert>
	
	<delete id="delete_salesgoods" flushCache="true" parameterType="com.lab.erp.vo.c.Erp_SalesgoodsVO">
		DELETE FROM erp_salesgoods WHERE salesgoods_no = #{salesgoods_no}
	</delete>

	
	<!-- 일마감처리 -->
	<update id="update_bs1_plus" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_Bs1VO">
		UPDATE erp_bs1 SET bs1_amount = #{bs1_amount} + bs1_amount
		WHERE bs1_no
	</update>
	
	<update id="update_bs1_minus" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_Bs1VO">
		UPDATE erp_bs1 SET bs1_amount = #{bs1_amount} - bs1_amount
		WHERE bs1_no
	</update>
	
	<update id="update_bs2_plus" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_Bs2VO">
		UPDATE erp_bs2 SET bs2_amount = #{bs2_amount} + bs2_amount
		WHERE bs2_no = #{bs2_no}
	</update>
	
	<update id="update_bs2_minus" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_Bs2VO">
		UPDATE erp_bs2 SET bs2_amount = #{bs2_amount} - bs2_amount
		WHERE bs2_no = #{bs2_no}
	</update>
	
	<update id="update_bs3_plus" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_Bs3VO">
		UPDATE erp_bs3 SET bs3_amount = #{bs3_amount} + bs3_amount
		WHERE bs3_no = #{bs3_no}
	</update>
	
	<update id="update_bs3_minus" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_Bs3VO">
		UPDATE erp_bs3 SET bs3_amount = #{bs3_amount} - bs3_amount
		WHERE bs3_no = #{bs3_no}
	</update>

	
	<select id="findClosingOne" resultType="com.lab.erp.vo.b.b1.Erp_ClosingVO">
		SELECT * FROM erp_closing where ctgr_no = #{ctgr_no} and closing_code = #{closing_code} and closing_date = #{closing_date}
	</select>	
	
	<insert id="save_closing" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_ClosingVO" keyProperty="closing_no" useGeneratedKeys="true" keyColumn="closing_no">
		INSERT INTO erp_closing (ctgr_no, closing_code, closing_date, debtor_no, closing_debtor, creditor_no, closing_creditor, comcode_no) 
		VALUES (#{ctgr_no}, #{closing_code}, #{closing_date}, #{debtor_no}, #{closing_debtor}, #{creditor_no}, #{closing_creditor}, #{comcode_no})
	</insert>
	
	<delete id="delete_closing" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_ClosingVO">
		DELETE FROM erp_closing WHERE closing_no = #{closing_no}
	</delete>
	
	
	<select id="findLastIdDebtor" resultType="int">
		SELECT MAX(debtor_no) FROM erp_debtor 
	</select>	
	
	<insert id="save_debtor" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_DebtorVO" keyProperty="closing_no" useGeneratedKeys="true" keyColumn="debtor_no">
		INSERT INTO erp_debtor (ctgr_no, bs3_no) 
		VALUES (#{ctgr_no}, #{bs3_no})
	</insert>
	
	<delete id="delete_debtor" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_DebtorVO">
		DELETE FROM erp_debtor WHERE debtor_no = #{debtor_no}
	</delete>
	
	<select id="findLastIdCreditor" resultType="int">
		SELECT MAX(creditor_no) FROM erp_creditor 
	</select>	
	
	<insert id="save_creditor" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_CreditorVO" keyProperty="closing_no" useGeneratedKeys="true" keyColumn="creditor_no">
		INSERT INTO erp_creditor (ctgr_no, bs3_no) 
		VALUES (#{ctgr_no}, #{bs3_no})
	</insert>
	
	<delete id="delete_creditor" flushCache="true" parameterType="com.lab.erp.vo.b.b1.Erp_CreditorVO">
		DELETE FROM erp_creditor WHERE creditor_no = #{creditor_no}
	</delete>
</mapper>